<Window x:Class="DownloaderApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:DownloaderApp"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:view="clr-namespace:DownloaderApp.MVVM.View"
        xmlns:vm="clr-namespace:DownloaderApp.MVVM.ViewModel"
        x:Name="_mainWindow"
        Width="700"
        Height="700"
        MinWidth="580"
        MinHeight="580"
        AllowsTransparency="False"
        ResizeMode="CanResize"
        SnapsToDevicePixels="True"
        UseLayoutRounding="True"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow"
        mc:Ignorable="d">
    <Window.Resources>

        <DataTemplate DataType="{x:Type vm:YoutubeVM}">

            <view:YoutubeView />

        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:InstagramVM}">

            <view:InstagramView />

        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:LoginVM}">

            <view:LoginView />

        </DataTemplate>

    </Window.Resources>

    <WindowChrome.WindowChrome>

        <WindowChrome CaptionHeight="1"
                      CornerRadius="0"
                      GlassFrameThickness="1"
                      ResizeBorderThickness="4" />

    </WindowChrome.WindowChrome>

    <Window.DataContext>

        <vm:MainVM />

    </Window.DataContext>


    <Border>

        <!--  Setting border style triggers to prevent the edges Window out of the screen  -->
        <Border.Style>

            <Style TargetType="{x:Type Border}">

                <Style.Triggers>

                    <DataTrigger Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}"
                                 Value="Maximized">

                        <Setter Property="Margin"
                                Value="6" />

                    </DataTrigger>

                    <DataTrigger Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}"
                                 Value="Normal">

                        <Setter Property="Margin"
                                Value="0" />

                    </DataTrigger>

                </Style.Triggers>

            </Style>

        </Border.Style>

        <Grid>

            <Grid.Background>

                <LinearGradientBrush StartPoint="0,0"
                                     EndPoint="1,1">

                    <GradientStop Offset=".2"
                                  Color="{StaticResource Color77224e}" />

                    <GradientStop Offset=".1"
                                  Color="{StaticResource Color602553}" />

                    <GradientStop Offset=".8"
                                  Color="{StaticResource DarkBlue}" />

                </LinearGradientBrush>

            </Grid.Background>

            <Grid>

                <Grid.ColumnDefinitions>

                    <ColumnDefinition Width="140" />

                    <ColumnDefinition Width="*" />

                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>

                    <RowDefinition Height="32" />

                    <RowDefinition Height="*" />

                </Grid.RowDefinitions>

                <!--  Title bar  -->
                <Grid Grid.ColumnSpan="2"
                      Background="{StaticResource DarkBlueBrush}"
                      MouseLeftButtonDown="WindowPanel_MouseLeftButtonDown">

                    <StackPanel HorizontalAlignment="Right"
                                Orientation="Horizontal">

                        <Button Click="MinimizeButton_Click"
                                Style="{StaticResource TitleBarButtonStyle}">

                            <Button.Content>

                                <Image Width="12"
                                       Height="12">

                                    <Image.Source>

                                        <DrawingImage>

                                            <DrawingImage.Drawing>

                                                <DrawingGroup ClipGeometry="M0,0 V16 H16 V0 H0 Z">

                                                    <GeometryDrawing Brush="#fff"
                                                                     Geometry="F1 M16,16z M0,0z M2,8A1,1,0,0,1,3,7L13,7A1,1,0,1,1,13,9L3,9A1,1,0,0,1,2,8z" />

                                                </DrawingGroup>

                                            </DrawingImage.Drawing>

                                        </DrawingImage>

                                    </Image.Source>

                                </Image>

                            </Button.Content>

                        </Button>

                        <Button Click="MaximizeButton_Click"
                                Style="{StaticResource TitleBarButtonStyle}">

                            <Button.Content>

                                <Image Width="12"
                                       Height="12">

                                    <Image.Source>

                                        <DrawingImage>
                                            <DrawingImage.Drawing>
                                                <DrawingGroup ClipGeometry="M0,0 V330 H330 V0 H0 Z">
                                                    <GeometryDrawing Brush="#fff"
                                                                     Geometry="F1 M330,330z M0,0z M315,0L15,0C6.716,0,0,6.716,0,15L0,315C0,323.284,6.716,330,15,330L315,330C323.284,330,330,323.284,330,315L330,15C330,6.716,323.285,0,315,0z M300,300L30,300 30,30 300,30 300,300z" />
                                                </DrawingGroup>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>

                                    </Image.Source>

                                </Image>

                            </Button.Content>

                        </Button>

                        <Button Click="ExitButton_Click"
                                Style="{StaticResource TitleBarButtonStyle}">

                            <Button.Content>

                                <Image Width="12"
                                       Height="12">

                                    <Image.Source>

                                        <DrawingImage>

                                            <DrawingImage.Drawing>

                                                <DrawingGroup ClipGeometry="M0,0 V300 H300 V0 H0 Z">

                                                    <DrawingGroup Opacity="1">

                                                        <DrawingGroup.ClipGeometry>

                                                            <RectangleGeometry RadiusX="0"
                                                                               RadiusY="0"
                                                                               Rect="0,0,300,300" />

                                                        </DrawingGroup.ClipGeometry>

                                                        <DrawingGroup Opacity="1">

                                                            <GeometryDrawing Brush="#fff"
                                                                             Geometry="F1 M300,300z M0,0z M244.802,61.643C234.168,50.875 224.661,42.297 210.837,35.523 202.151,31.261 191.669,34.934 187.47,43.717 183.243,52.501 186.889,63.072 195.566,67.334 205.86,72.375 212.776,77.95 220.72,85.992 259.717,125.427 259.717,189.586 220.72,229.011 201.83,248.125 176.694,258.624 149.984,258.624 123.266,258.624 98.138,248.116 79.247,229.011 40.251,189.586 40.251,125.427 79.247,85.992 87.218,77.941 95.099,72.384 104.885,67.352 113.15,63.081 116.608,52.519 112.597,43.726 108.584,34.952 99.952,31.341 91.482,35.487 78.051,42.082 65.844,50.875 55.184,61.643 2.901,114.498 2.901,200.488 55.184,253.352 81.33,279.775 115.662,293 149.994,293 184.334,293 218.666,279.784 244.803,253.352 297.104,200.506 297.104,114.507 244.802,61.643z M149.984,174C159.849,174,167.855,165.993,167.855,156.129L167.882,24.871C167.882,15.007 159.876,7 150.011,7 140.145,7 132.139,15.007 132.139,24.871L132.139,78.486 132.112,156.128C132.112,166.002,140.118,174,149.984,174z" />

                                                        </DrawingGroup>

                                                    </DrawingGroup>

                                                </DrawingGroup>

                                            </DrawingImage.Drawing>

                                        </DrawingImage>

                                    </Image.Source>

                                </Image>

                            </Button.Content>

                        </Button>

                    </StackPanel>

                </Grid>

                <StackPanel Grid.Row="1">

                    <Menu Background="Transparent"
                          FontSize="18"
                          Foreground="#fff">

                        <Menu.ItemsPanel>

                            <ItemsPanelTemplate>

                                <VirtualizingStackPanel Cursor="Hand"
                                                        Orientation="Vertical" />

                            </ItemsPanelTemplate>

                        </Menu.ItemsPanel>

                        <MenuItem Padding="28,12,0,12"
                                  Command="{Binding YoutubeMenuItemCommand}"
                                  Header="Youtube"
                                  Style="{StaticResource MenuItemTheme}" />

                        <MenuItem Padding="28,12,0,12"
                                  Header="Instagram"
                                  Style="{StaticResource MenuItemTheme}">

                            <MenuItem Padding="0,12"
                                      Command="{Binding LoginMenuItemCommand}"
                                      Header="Login" />

                            <MenuItem Padding="0,12"
                                      Command="{Binding InstagramMenuItemCommand}"
                                      Header="Downloader" />

                        </MenuItem>

                    </Menu>

                    <!--<RadioButton Height="50"
                                 Command="{Binding YoutubeMenuButtonCommand}"
                                 Content="Youtube"
                                 Cursor="Hand"
                                 FontSize="18"
                                 IsChecked="True"
                                 Style="{StaticResource MenuButtonTheme}" />

                    <RadioButton Height="50"
                                 Command="{Binding InstagramMenuButtonCommand}"
                                 Content="Instargam"
                                 Cursor="Hand"
                                 FontSize="18"
                                 Style="{StaticResource MenuButtonTheme}" />-->

                </StackPanel>

                <Frame Grid.Row="1"
                       Grid.Column="1"
                       Content="{Binding CurrentPage}"
                       NavigationUIVisibility="Hidden">

                    <Frame.ContentTemplate>

                        <DataTemplate>

                            <Grid>

                                <Grid.ColumnDefinitions>

                                    <ColumnDefinition Width="Auto" />

                                    <ColumnDefinition Width="*" />

                                    <ColumnDefinition Width="Auto" />

                                </Grid.ColumnDefinitions>


                                <StackPanel Grid.Column="0"
                                            Width="32"
                                            VerticalAlignment="Stretch"
                                            Orientation="Horizontal">

                                    <StackPanel.Background>

                                        <LinearGradientBrush StartPoint="0,0"
                                                             EndPoint="0,1">

                                            <GradientStop Offset=".5"
                                                          Color="#7E2553" />

                                            <GradientStop Offset=".6"
                                                          Color="#FF004D" />

                                            <GradientStop Offset=".9"
                                                          Color="#FAEF5D" />

                                            <GradientStop Offset=".2"
                                                          Color="{StaticResource DarkBlue}" />

                                        </LinearGradientBrush>

                                    </StackPanel.Background>

                                </StackPanel>


                                <ContentControl Grid.Column="1"
                                                Margin="16"
                                                Content="{Binding}" />

                                <StackPanel Grid.Column="2"
                                            Width="32"
                                            VerticalAlignment="Stretch"
                                            Orientation="Horizontal">

                                    <StackPanel.Background>

                                        <LinearGradientBrush StartPoint="0,0"
                                                             EndPoint="0,1">

                                            <GradientStop Offset=".5"
                                                          Color="#7E2553" />

                                            <GradientStop Offset=".6"
                                                          Color="#FF004D" />

                                            <GradientStop Offset=".9"
                                                          Color="#FAEF5D" />

                                            <GradientStop Offset=".2"
                                                          Color="{StaticResource DarkBlue}" />

                                        </LinearGradientBrush>

                                    </StackPanel.Background>

                                </StackPanel>


                            </Grid>

                        </DataTemplate>

                    </Frame.ContentTemplate>

                </Frame>

            </Grid>

        </Grid>
    </Border>
</Window>
